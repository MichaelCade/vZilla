<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>Blog Archives - vZilla.co.uk</title>
<meta property='og:site_name' content='vZilla.co.uk' />
<meta property='og:title' content='Blog Archives' />
<meta property='og:description' content='Nic Teaming Â  So this post carries on from the previous one regarding Jumbo Frames. On this one I will state what I generally do when it comes to NIC teaming throughout the whole stack. Firstly we...' />
<meta property='og:image' content='http://vzilla.co.uk/uploads/3/2/3/9/3239227/4739166.png' />
<meta property='og:url' content='http://vzilla.co.uk/1/archives/07-2014/1.html' />
<meta http-equiv='cache-control' content='no-cache' />
<link rel='alternate' type='application/rss+xml' title='RSS 2.0' href='http://vzilla.co.uk/1/feed' />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<link rel="stylesheet" href="//assets.dragndropbuilder.com/css/sites.css?buildTime=1432850078" type="text/css" /><link rel='stylesheet' type='text/css' href='http://www.dragndropbuilder.com/editor/libraries/fancybox/fancybox.css?1432850078' />
<link rel='stylesheet' type='text/css' href='/files/main_style.css?1452789018' title='wsite-theme-css' />
<style type='text/css'>
.wsite-elements div.paragraph, .wsite-elements p, .wsite-elements .product-block .product-title, .wsite-elements .product-description, .wsite-elements .wsite-form-field label, .wsite-elements .wsite-form-field label, #wsite-content div.paragraph, #wsite-content p, #wsite-content .product-block .product-title, #wsite-content .product-description, #wsite-content .wsite-form-field label, #wsite-content .wsite-form-field label, .blog-sidebar div.paragraph, .blog-sidebar p, .blog-sidebar .wsite-form-field label, .blog-sidebar .wsite-form-field label {}
#wsite-content div.paragraph, #wsite-content p, #wsite-content .product-block .product-title, #wsite-content .product-description, #wsite-content .wsite-form-field label, #wsite-content .wsite-form-field label, .blog-sidebar div.paragraph, .blog-sidebar p, .blog-sidebar .wsite-form-field label, .blog-sidebar .wsite-form-field label {}
.wsite-elements h2, .wsite-elements .product-long .product-title, .wsite-elements .product-large .product-title, .wsite-elements .product-small .product-title, #wsite-content h2, #wsite-content .product-long .product-title, #wsite-content .product-large .product-title, #wsite-content .product-small .product-title, .blog-sidebar h2 {}
#wsite-content h2, #wsite-content .product-long .product-title, #wsite-content .product-large .product-title, #wsite-content .product-small .product-title, .blog-sidebar h2 {}
#wsite-title {}
</style>
<script><!--
var STATIC_BASE = 'http://www.dragndropbuilder.com/';
var STYLE_PREFIX = 'wsite';
//-->
</script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script src='../../../assets.dragndropbuilder.com/js/site/main.js@buildTime=1432850078'></script>
<script type='text/javascript'><!--
(function(jQuery){
function initFlyouts(){initPublishedFlyoutMenus([{"id":"585258828175266744","title":"Home","url":"index.html","target":""},{"id":"127302207674349487","title":"About vZilla","url":"about-vzilla.html","target":""},{"id":"459605263778525960","title":"vZilla HomeLab","url":"vzilla-homelab.html","target":""},{"id":"894781723381334435","title":"vZilla Blog","url":"vzilla-blog.html","target":""}],'894781723381334435',"<li class='wsite-nav-more'><a href='#'>more...<\/a><\/li>",'active',false)}
if (jQuery) {
if (jQuery.browser.msie && !window.flyoutMenusRefreshable) window.onload = initFlyouts;
else jQuery(initFlyouts);
}else{
if (Prototype.Browser.IE) window.onload = initFlyouts;
else document.observe('dom:loaded', initFlyouts);
}
})(window._W && _W.jQuery)
//-->
</script>
</head>
<body class='wsite-theme-light no-header-page wsite-page-vzilla-blog'>
<div id="container">
	<table id="header">
		<tr>
			<td id="logo"><span class='wsite-logo'><a href='../../../index.html'><img src='../../../uploads/3/2/3/9/3239227/4739166.png' /></a></span></td>
			<td id="header-right">
				<table>
					<tr>
						<td class="phone-number"></td>
						<td class="social"><div style="text-align:left;"><div style="height:0px;overflow:hidden"></div>
<span class="wsite-social wsite-social-default"><a class='wsite-social-item wsite-social-twitter' href='http://twitter.com/michaelcade1' target='_blank'><span class='wsite-social-item-inner'></span></a><a class='wsite-social-item wsite-social-linkedin' href='http://uk.linkedin.com/in/MichaelCade1' target='_blank'><span class='wsite-social-item-inner'></span></a><a class='wsite-social-item wsite-social-mail' href='mailto:michael.cade@outlook.com' target='_blank'><span class='wsite-social-item-inner'></span></a></span>
<div style="height:0px;overflow:hidden"></div></div></td>
					</tr>
				</table>
				<div class="search"></div>
			</td>
		</tr>
	</table>
	<div id="main-bot">
		<div id="main-top">
			<div id="main">
				<div id="navigation">
					<ul class='wsite-menu-default'><li id='pg585258828175266744'><a href='../../../index.html'>Home</a></li><li id='pg127302207674349487'><a href='../../../about-vzilla.html'>About vZilla</a></li><li id='pg459605263778525960'><a href='../../../vzilla-homelab.html'>vZilla HomeLab</a></li><li id='active'><a href='../../../vzilla-blog.html'>vZilla Blog</a></li></ul>
					<div class="clear"></div>
					<em id="tl"></em>
					<em id="tr"></em>
					<em id="bl"></em>
					<em id="br"></em>
				</div>
				<div id="banner-bot">
					<div id="banner-top">
						<div id="banner">
							<div class="wsite-header"></div>
						</div>
					</div>
				</div>
				<div id="content">
					<table style='border: 0; width: 100%; table-layout: fixed' id='blogTable'><tr><td valign='top'><div id='894781723381334435-blog' class='blog-body' style='float: left;'>
<div id='wsite-content'><div id='blog-post-320484017796933124' class='blog-post'><div class='blog-header'><h2 class='blog-title'><a href='/1/post/2014/07/flexpod-nic-teaming.html' class='blog-title-link' class='blog-link'>FlexPod - NIC Teaming</a></h2> <p class='blog-date'><span class='date-text'>15/07/2014</span></p><!-- 320484017796933124 -->
<p class='blog-comments'><a href='/1/post/2014/07/flexpod-nic-teaming.html#comments' class='blog-link'>1 Comment</a></p></div><div class='blog-separator'> &nbsp; </div><div class='blog-content'><div class="paragraph" style="text-align:left;">  <strong style="">Nic Teaming</strong> &nbsp;<br /><span style=""></span><br />So this post carries on from the previous one regarding Jumbo Frames. On this one I will state what I generally do when it comes to NIC teaming throughout the whole stack. <br /><span style=""></span><br /><span style=""></span>    Firstly we will look at the UCS element <br /><span style=""></span><br /><span style=""></span>    So within the UCS chassis we have a varied amount of different cards we can have&hellip;. These are listed here - <a style="" href="http://www.cisco.com/c/en/us/products/servers-unified-computing/ucs-c-series-rack-servers/c_series_net_adapter.html">http://www.cisco.com/c/en/us/products/servers-unified-computing/ucs-c-series-rack-servers/c_series_net_adapter.html</a> <br /><span style=""></span><br /><span style=""></span>    So with UCS we have two Ethernet switching modes that determine the way the fabric interconnects behave as switching devices. Between storage, servers and network. <br /><span style=""></span><br /><span style=""></span>    We have <br /><span style=""></span><br /><span style=""></span>    End-host mode &ndash; the fabric interconnects appear to the upstream devices as end hosts with multiple links, the switch does not run the spanning tree protocol and avoids loops by following a set of rules for traffic forwarding. <br /><span style=""></span><br /><span style=""></span>    Switch mode &ndash; the switch runs the spanning tree protocol to avoid loops and broadcast multicast packets are handled in the traditional way. <br /><span style=""></span><br /><span style=""></span>    By default End-Host Mode is configured, and switch mode should only be configured if the interconnects are connected directly to a router. This is the configuration we see 99% of the time in flexpod deployments. One thing to note that if you were to change between the two it does require a reboot. <br /><span style=""></span><br /><span style=""></span>    We then have vNICs these are associated with a single uplink port, which can also be a PortChannel, this is called &ldquo;pinning&rdquo; then the external interface is called a pinned uplink port, and because we are using end host mode pinning is required. We would also generally used a non-static paths which will mean the failover mechanisms will not be invoked till all link ports on that fabric are failed. <br /><span style=""></span><br /><span style=""></span>    So then from the UCS chassis we then have connectivity to our Nexus Switches&hellip; Link Aggregation is key for our NIC teaming. A VPC is then created spanning the two nexus switches. &ndash; short and sweet on this one as it&rsquo;s not something I deal with very often we have dedicated guys that take this on and configure. <br /><span style=""></span><br /><span style=""></span>    So that leaves us with two more items within our stack, VMware and NetApp, so will touch on VMware first. <br /><span style=""></span><br /><span style=""></span>    The ideal way within VMware for this configuration is either Route based on the originating virtual port ID or route based on source MAC hash&hellip; there are lots of resources over the net explaining what these do, one thing is for sure though we cannot use route based on ip hash&hellip;. If you do then everything on the configured vswitch will be go into italics and you will lose connectivity. We have to choose one of the two first mentioned. I would also like to add here that generally on our VMware configurations I would create one vswitch with multiple VMkernel and multiple virtual machine port groups, this vswitch would then also contain all available physical nics, then on the switch all vlans are untagged. Meaning that for each vmkernel we tag our vlans. The reason I suggest doing it this way is because of ease of management and best throughput. <br /><span style=""></span><br /><span style=""></span>    This may change if you have a mix between 1gb and 10gb possibly you would separate or at least have a management vmkernel on both networks. <br /><span style=""></span><br /><span style=""></span>    This then brings us onto the NetApp side of things, because we are using the Cisco switches as part of the flexpod offering this means we are able to use LACP from the NetApp controllers, again there is many many different articles over the web where you will find some really in depth info on LACP. The reasons for using this is very similar to VMware, it allows us to take all data ports and trunk together and carry all required vlans down that same trunk. With LACP you will only ever use one interface at a time but with many hosts for example connecting we would hope that we can utilise all available interfaces. LACP is not a great trunk as such for example If you have 4 x 1gb in an LACP trunk you will never reach the throughput expected on a 4gb connection you would see a 1gb connection speed if connected through one host but if you connected another host and ran another test you should pick another interface in the group&hellip; this is not set in stone but you get the idea. <br /><span style=""></span><br /><span style=""></span>    </div></div><div class='blog-social'><div class='blog-social-item'><a class='twitter-share-button' href='http://twitter.com/share?url=http%3A%2F%2Fvzilla.co.uk%2F1%2Fpost%2F2014%2F07%2Fflexpod-nic-teaming.html' data-count='horizontal'></a></div><div class='blog-social-item blog-fb-like'><fb:like href='http://vzilla.co.uk/1/post/2014/07/flexpod-nic-teaming.html' show_faces='false' layout='button_count' width='90'></fb:like></div><div style='clear:both'></div></div>
<div class='blog-comments-bottom'><a href='/1/post/2014/07/flexpod-nic-teaming.html#comments' class='blog-link'>1 Comment</a></div><div class='blog-post-separator'>&nbsp;</div>

</div><!-- bid: 664567885456871353 --></div>
</div>
</td><td class='blog-sidebar' valign='top'><div id='894781723381334435-sidebar' class='column-blog'><div class='blog-sidebar-separator'><ul id='894781723381334435-sidebar-list' class='columnlist-blog' style='margin:0; padding: 0;'> <h2 class="blog-author-title" style="text-align:left;">vZilla.co.uk</h2>
<p style="text-align:left;">As you can probably tell my name is not vZilla.co.uk, as stated on the home page the views are of my own and not of my employer.&nbsp;</p>

<h2 class="blog-archives-title" style="text-align:left;">Archives</h2>
<p class='blog-archive-list'><a href='../01-2016/1.html' class='blog-link'>January 2016</a><br />
<a href='../11-2015/1.html' class='blog-link'>November 2015</a><br />
<a href='../10-2015/1.html' class='blog-link'>October 2015</a><br />
<a href='../09-2015/1.html' class='blog-link'>September 2015</a><br />
<a href='../07-2015/1.html' class='blog-link'>July 2015</a><br />
<a href='../05-2015/1.html' class='blog-link'>May 2015</a><br />
<a href='../04-2015/1.html' class='blog-link'>April 2015</a><br />
<a href='../03-2015/1.html' class='blog-link'>March 2015</a><br />
<a href='../02-2015/1.html' class='blog-link'>February 2015</a><br />
<a href='../01-2015/1.html' class='blog-link'>January 2015</a><br />
<a href='../12-2014/1.html' class='blog-link'>December 2014</a><br />
<a href='../11-2014/1.html' class='blog-link'>November 2014</a><br />
<a href='../08-2014/1.html' class='blog-link'>August 2014</a><br />
<a href='1.html' class='blog-link'>July 2014</a><br />
<a href='../06-2014/1.html' class='blog-link'>June 2014</a><br />
<a href='../01-2014/1.html' class='blog-link'>January 2014</a><br />
<a href='../12-2013/1.html' class='blog-link'>December 2013</a><br />
<a href='../07-2013/1.html' class='blog-link'>July 2013</a><br />
<a href='../04-2013/1.html' class='blog-link'>April 2013</a><br />
</p>

<h2 class="blog-category-title" style="text-align:left;">Categories</h2>
<p class='blog-category-list'><a href='../../category/all/1.html' class='blog-link'>All</a><br />
</p>

<p class='blog-feed-link'><a href='../../feed'><img src='http://www.dragndropbuilder.com/editor/images/common/bg_feed.gif' /> RSS Feed</a></p> </ul></div></div></td></tr></table><hr style='visibility: hidden; clear: both;' />
					<div class="clear"></div>
				</div>
			</div>
		</div>
	</div>
	<div id="footer">
		<div class='wsite-elements wsite-footer'>
<div><div class="wsite-multicol"><div class='wsite-multicol-table-wrap' style='margin:0 -15px'>
<table class='wsite-multicol-table'>
<tbody class='wsite-multicol-tbody'>
<tr class='wsite-multicol-tr'>
<td class='wsite-multicol-col' style='width:50%;padding:0 15px'></td>
<td class='wsite-multicol-col' style='width:50%;padding:0 15px'></td>
</tr>
</tbody>
</table>
</div></div></div>

<div class="paragraph"><a href='http://www.ipage.com/' target='_blank'>Web Hosting</a> by iPage</div></div><script type='text/javascript'>
<!--

if (document.cookie.match(/(^|;)\s*is_mobile=1/)) {
	var windowHref = window.location.href || '';
	if (windowHref.indexOf('?') > -1) {
		windowHref += '&';
	} else {
		windowHref += '?';
	}
	document.write(
		"&nbsp;&nbsp;&nbsp;&nbsp;" +
		"<a class='wsite-view-link-mobile' href='" + windowHref + "view=mobile'>Mobile Site</a>"
	);
}

//-->
</script>

		<div class="clear"></div>
	</div>
</div>

<div id='fb-root'></div><script type='text/javascript'>(function() {function j(src, root) {var s = document.createElement('script');s.type = 'text/javascript';s.async = true;s.src = src;(root || document.getElementsByTagName('head')[0]).appendChild(s);}j('http://connect.face'+'book.net/en_US/all.js#xfbml=1', document.getElementById('fb-root'));j('http://platform.twi'+'tter.com/widgets.js');})()</script>
</body>
</html>